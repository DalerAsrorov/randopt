<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <title>randopt - </title>

        <!-- Bootstrap -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/sandstone/bootstrap.min.css" />

        <!--Prism for code high-lighting-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism-solarizedlight.css" / >

        <!--KaTeX for fast embedded math-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.6.0/katex.min.css">

        <!--Pseudocode.js-->
        <link rel="stylesheet" href="https://cdn.rawgit.com/tatetian/pseudocode.js/master/static/pseudocode.css">


        <style type="text/css" media="all">
        /* Space out content a bit */
        body {
            padding-top: 20px;
            padding-bottom: 20px;
        }

        p {
            font-size: 16px;
            text-align: justify;
        }

        /* Everything but the jumbotron gets side spacing for mobile first views */
        .header,
        .footer {
            padding-right: 15px;
            padding-left: 15px;
        }

        /* Custom page header */
        .header {
            padding-bottom: 20px;
            border-bottom: 1px solid #e5e5e5;
        }
        /* Make the masthead heading the same height as the navigation */
        .header h3 {
            margin-top: 0;
            margin-bottom: 0;
            line-height: 40px;
        }

        img {
            max-width: 100%;
        }

        /* Custom page footer */
        .footer {
            padding-top: 19px;
            color: #777;
            border-top: 1px solid #e5e5e5;
        }

        /* Customize container */
        @media (min-width: 768px) {
            .container {
                                max-width: 730px;
                            }
        }
        .container-narrow > hr {
            margin: 30px 0;
        }

        /* Responsive: Portrait tablets and up */
        @media screen and (min-width: 768px) {
            /* Remove the padding we set earlier */
            .header,
            .marketing,
            .footer {
                padding-right: 0;
                padding-left: 0;
            }
            /* Space out the masthead */
            .header {
                margin-bottom: 30px;
            }
            /* Remove the bottom border on the jumbotron for visual effect */
            .jumbotron {
                border-bottom: 0;
            }
        }

        .well {
            border: 1px solid #767676;
            width: 157px;
            max-width: 157px;
        }
        .well a {
            color:#767676;
            margin-bottom:5px;
        }
        .well ul {
            list-style: none;
            margin: 0px;
            padding-left: 10px;
        }
        </style>

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
            <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->


        <!--Plotly.js-->
        <!--Needs to be imported before body, else figs won't load.-->
        <script src="https://cdn.plot.ly/plotly-1.2.0.min.js"></script>

    </head>
    <body>
        <div class="container">
            <div class="header clearfix">
                <!--<nav>-->
                <!--<ul class="nav nav-pills pull-right">-->
                <!--<li role="presentation" class="active"><a href="#">Home</a></li>-->
                <!--<li role="presentation"><a href="#">About</a></li>-->
                <!--<li role="presentation"><a href="#">Contact</a></li>-->
                <!--</ul>-->
                <!--</nav>-->

                                <h1 class="text-center">randopt</h1>
                <h4 class="text-sm text-muted text-center">  <span style="font-weight:normal;"><i>November 20, 2016</i></span></h4>
                            </div>

                        <div style="text-align:center;">
            <div class="figure">
            <img src="./figs/randopt.png" />
            
            </div>
            </div>
            <h1 id="introduction">Introduction</h1>
            <p><code>randopt</code> is a python package that will help you manage and run experiments. On top of that, it provides functionalities for <a href="http://www.argmin.net/2016/06/20/hypertuning/">hyper-parameter search</a>. It's still in its early days, and we are working on adding more features while keeping the current streamlined workflow.</p>
            <h1 id="installation">Installation</h1>
            <p>No dependencies. To install <code>randopt</code> execute</p>
            <pre class="shell"><code>pip install randopt</code></pre>
            <p>Code sources are also available on the GitHub repo</p>
            <blockquote>
            <p><a href="https://github.com/seba-1511/randopt/" class="uri">https://github.com/seba-1511/randopt/</a></p>
            </blockquote>
            <h1 id="overview">Overview</h1>
            <p><code>randopt</code> provides two main utilities: a programmatic interface to experiments and a visualization tool. Here's what a typical randopt workflow looks like.</p>
            <ol style="list-style-type: decimal">
            <li>Annotate your experiments with <code>randopt.Experiment</code>,</li>
            <li>Run that <strong>same</strong> script so as to try multiple configurations,</li>
            <li>Analyse the results using <code>roviz.py</code> or the programmatic API.</li>
            </ol>
            <h3 id="simple-example">Simple Example</h3>
            <p>TL;DR: Check out <a href="https://github.com/seba-1511/randopt/blob/master/examples/simple.py">this example</a> to get started.</p>
            <p>Let's work through a simple example; trying to find the minimum value of <span class="math inline">\(x^2\)</span> by random search. We first define our <strong>loss function</strong>, which will return the value we're trying to optimize for.</p>
            <div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">            <span class="kw">def</span> loss(x):
                <span class="cf">return</span> x<span class="op">**</span><span class="dv">2</span></code></pre></div>
            <p>Our example is trivial, and a real-world application will more likely to look like minimizing the validation accuracy of a learning algorithm.</p>
            <p>Now that we have a loss function we create an experiment using <code>randopt.Experiment(name, params)</code>.</p>
            <div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">            <span class="im">import</span> randopt <span class="im">as</span> ro
            experiment <span class="op">=</span> ro.Experiment(<span class="st">&#39;simple_example&#39;</span>, {
                <span class="st">&#39;alpha&#39;</span>: ro.Gaussian(mean<span class="op">=</span><span class="fl">0.0</span>, std<span class="op">=</span><span class="fl">0.5</span>)
            })</code></pre></div>
            <p>In the above snippet, <code>'simple_example'</code> is the name of the experiment, and <code>alpha</code> is the parameter we will sample. Note</p>
            <ol style="list-style-type: decimal">
            <li>you could have used any name (eg, <code>param_name</code>) instead of <code>alpha</code> except for <code>result</code>,</li>
            <li>you can define any number of parameters, and</li>
            <li>once sampled, their values are accessible at <code>experiment.param_name</code>.</li>
            </ol>
            <p>Finally, we decided to sample the value of <code>alpha</code> according to a Gaussian distribution, with mean 0 and standard deviation 0.5. <code>randopt</code> provides <a href="https://seba-1511.github.io/randopt/randopt.samplers.html">several distributions</a>, and it is easy to also <a href="https://github.com/seba-1511/randopt/blob/master/randopt/samplers.py#L82">add you own</a>.</p>
            <p>It is now time for us to sample, run our experiment, and save the result.</p>
            <div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">            <span class="cf">for</span> i <span class="op">in</span> <span class="bu">range</span>(<span class="dv">100</span>):
                <span class="co"># Could use experiment.sample_all_params()</span>
                experiment.sample(<span class="st">&#39;alpha&#39;</span>)
                result <span class="op">=</span> loss(experiment.alpha)
                experiment.add_result(result)</code></pre></div>
            <p>Here we decided to run our experiment a 100 times. As noted in the comment we could have used <code>experiment.sample_all_params()</code> instead of <code>experiment.sample('alpha')</code>. This is particularly useful when dealing with a large number of hyper-parameters.</p>
            <p>The crucial line is the call to <code>experiment.add_result(result)</code>. It will save a JSON file with with the current hyper-parameters and the obtained result. You can also choose to add more information in the JSON dump by passing a dictionary as the second parameter to <code>add_result</code>. For example, you could pass the list of validation errors of your iterative training algorithm.</p>
            <div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">experiment.add_result(loss, data<span class="op">=</span>{<span class="st">&#39;convergence&#39;</span>: [<span class="dv">10</span>, <span class="dv">9</span>, <span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="fl">0.1</span>]})</code></pre></div>
            <h3 id="retrieving-results">Retrieving Results</h3>
            <p>There are two <em>preferred</em> ways to retrieve results from randopt. The first one is using <code>roviz.py</code>, which will generate a web-page with a summary of all results.</p>
            <pre><code>roviz.py -e simple_example</code></pre>
            <p>The an example of the web page generated by the above line is <a href="./simple_example/viz.html">available here</a>. Try clicking on the values of <code>alpha</code> !</p>
            <p>The second option is to explore your results using the programmatic API. The following snippet demonstrates some of the available options to search through your results.</p>
            <div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">            mini <span class="op">=</span> experiment.minimum() <span class="co"># Returns the exp. with minimum result</span>
            <span class="bu">print</span> <span class="st">&#39;Minimum result: &#39;</span>, mini.value, <span class="st">&#39;, with params: &#39;</span>, mini.params
            
            maxi <span class="op">=</span> experiment.maximum() <span class="co"># Returns the exp. with maximum result</span>
            <span class="bu">print</span> <span class="st">&#39;Maximum result: &#39;</span>, maxi.value, <span class="st">&#39;, with params: &#39;</span>, maxi.params
            
            leq <span class="op">=</span> <span class="kw">lambda</span> x, y: x <span class="op">&lt;=</span> y
            top <span class="op">=</span> experiment.top(<span class="dv">3</span>, fn<span class="op">=</span>leq) <span class="co"># Best n according to fn. Default: leq</span></code></pre></div>
            <p>Of course, you can easily access each run individually through its JSON dump, which is available in the <code>randopt_result/simple_example/</code> folder.</p>
            <h3 id="distributed-parallel-search">Distributed / Parallel Search</h3>
            <p>One of the advantage of dumping each result in its own file is that we can trivially parallelize the search. Hence if running the above example involves calling</p>
            <pre><code>python simple.py</code></pre>
            <p>then running that command <a href="http://www.argmin.net/2016/06/20/hypertuning/">twice, concurrently</a> (see below for Unix) will launch two processes that should be allocated different cores by the operating system.</p>
            <pre><code>python simple.py &amp; python simple.py</code></pre>
            <p>Even better, share your code with friends, let them run it, and then copy their JSON files in your <code>randopt_results/simple_experiment/</code> folder. The search / visualization scripts will consider the entirety of the directory and your friends' results will be included too !</p>
            <h3 id="whats-next">What's next</h3>
            <p><code>randopt</code> includes other useful utilities to manage your experiments. (eg, seed setting, experiment reproduction, fancy samplers) To learn more about them you can</p>
            <ul>
            <li>Read the <a href="./randopt.html">docs</a>,</li>
            <li>Check out <a href="https://github.com/seba-1511/randopt/blob/master/examples/hb_example.py">more</a> <a href="https://github.com/seba-1511/randopt/blob/master/examples/hb_vs_random.py">complex</a> <a href="https://github.com/seba-1511/randopt/blob/master/examples/multi_params.py">examples</a>, and</li>
            <li>Contribute !</li>
            </ul>
            <h1 id="roadmap">Roadmap</h1>
            <p>Here's a list of functionalities we would like to add to <code>randopt</code></p>
            <ul>
            <li>More samplers</li>
            <li><a href="https://arxiv.org/abs/1603.06560">HyperBand</a> support (currently <a href="https://github.com/seba-1511/randopt/blob/master/examples/hb_example.py">experimental</a>)</li>
            <li><a href="http://www.ml4aad.org/algorithm-configuration/smac/">Bayesian</a> <a href="https://hal.inria.fr/hal-00642998">optimization</a> <a href="http://www.jmlr.org/proceedings/papers/v37/snoek15.pdf">support</a>, especially for later stages fine-tuning</li>
            <li>Improved performance with JSON file management</li>
            <li>Fancier HTML visualization - in particular w.r.t. to plotting result, confidence intervals, etc...</li>
            </ul>
            <h1 id="contributors">Contributors</h1>
            <p>The following people have made contributions to randopt</p>
            <ul>
            <li>Séb Arnold</li>
            <li>Noel Trivedi</li>
            <li>Cyrus Jia</li>
            </ul>
            
            <footer class="footer">
                <p><b>randopt</b> - <i></i>, November 20, 2016.</p>
            </footer>

        </div> <!-- /container -->

        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <!-- Include all compiled plugins (below), or include individual files as needed -->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

        <!--Prism for code highlighting-->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/prism.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/components/prism-python.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/components/prism-c.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/components/prism-java.min.js"></script>

        <!--MathJax-->
        <script type="text/x-mathjax-config">
        var delim = '\u0024';
        MathJax.Hub.Config({
          tex2jax: {inlineMath: [[delim, delim], ['\\(','\\)']]}
        });
        </script>
        <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

        <!--KaTeX JavaScript-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.6.0/katex.min.js"></script>
        <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.6.0/contrib/auto-render.min.js"></script>-->

        <!--Pseudocode.js-->
        <script src="http://www.tatetian.io/pseudocode.js/pseudocode/pseudocode.min.js"></script>

        <!--Custom scripting-->
        <script type="text/javascript">
        // Allows prism to work properly
        jQuery(document).ready(function() {
            jQuery('.python').addClass('language-python').removeClass('python');
            jQuery('.javascript').addClass('language-js').removeClass('javascript');
            jQuery('.c').addClass('language-c').removeClass('c');
            jQuery('.java').addClass('language-java').removeClass('java');
            jQuery('.sourceCode').removeClass('sourceCode');
            jQuery('table').addClass('table table-striped table-bordered');
            jQuery('img').addClass('img-responsive');
            // renderMathInElement(document.body, {
            //     displayMode: false,
            //     throwOnError: false,
            //     errorColor: '#cc0000',
            // });

            var math = document.getElementsByClassName("math");
            // MathJax.Hub.Queue(["Typeset", MathJax.Hub, math]);
            MathJax.Hub.Queue([math, ]);
            Prism.highlightAll(false);

            // The following uses pseudocode.js to render algorithms
            var i, content, container;
            var pseudocodeElems = document.querySelectorAll('pre.algo code');
            var parents = document.querySelectorAll('pre.algo');
            var displayOptions = {
                indentSize: '1.5em',
                commentDelimiter: '//',
                lineNumber: true,
                lineNumberPunc: ':',
                noEnd: true,
                captionCount: 1,
            };
            for (i=0; i < pseudocodeElems.length; i++) {
                content = pseudocodeElems[i].textContent;
                container = document.createElement('div');
                parents[i].parentNode.insertBefore(container, parents[i]);
                pseudocode.render(content, container, displayOptions);
                parents[i].style.display = 'none';
                parents[i].parentNode.removeChild(parents[i]);
            }
        });
        </script>
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
          ga('create', 'UA-68693545-3', 'auto');
          ga('send', 'pageview');
        </script>

    </body>
</html>
